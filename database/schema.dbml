Enum statut_reservation_enum {
  EN_ATTENTE
  CONFIRMEE
  ANNULEE
  REMBOURSEE
}

Enum statut_billet_enum {
  EMIS
  ANNULE
  UTILISE
  REMBOURSE
}

Enum statut_paiement_enum {
  EN_ATTENTE
  VALIDE
  REFUSE
}

Table status_vol {
  id int [pk, increment]
  libelle varchar [unique, not null]
  description text
  created_at timestamp
  updated_at timestamp
}

Table classe_siege {
  id int [pk, increment]
  libelle varchar [unique, not null]
  description text
  created_at timestamp
  updated_at timestamp
}

Table role_equipage {
  id int [pk, increment]
  libelle varchar [unique, not null]
  description text
  created_at timestamp
  updated_at timestamp
}

Table model_avion {
  id int [pk, increment]
  designation varchar [unique, not null]
  fabricant varchar [not null]
  capacite int [not null]
  autonomie_km int
  vitesse_km_h int
  description text
  created_at timestamp
  updated_at timestamp
}

Table etat_avion {
  id int [pk, increment]
  libelle varchar [unique, not null]
  description text
  created_at timestamp
  updated_at timestamp
}

Table avion {
  id int [pk, increment]
  code_avion varchar [unique, not null]
  model_avion_id int [not null]
  etat_avion_id int [not null]
  capacite_totale int [not null]
  created_at timestamp
  updated_at timestamp
}

Table siege {
  id int [pk, increment]
  numero_siege varchar [not null]
  classe_siege_id int [not null]
  avion_id int [not null]
  created_at timestamp
  updated_at timestamp

  Indexes {
    (avion_id, numero_siege) [unique]
  }
}

Table equipage {
  id int [pk, increment]
  nom varchar [not null]
  prenom varchar [not null]
  role_id int [not null]
  created_at timestamp
  updated_at timestamp
}

Table aeroport {
  id int [pk, increment]
  code_aeroport varchar [unique, not null]
  nom varchar [not null]
  ville varchar [not null]
  pays varchar [not null]
  created_at timestamp
  updated_at timestamp
}

Table ligne_vol {
  id int [pk, increment]
  numero_vol varchar [unique, not null]
  aeroport_depart_id int [not null]
  aeroport_arrivee_id int [not null]
  duree_estimee_minutes int [not null]
  distance_km int
  description text
  created_at timestamp
  updated_at timestamp
}

Table vol_opere {
  id int [pk, increment]
  ligne_vol_id int [not null]
  avion_id int [not null]
  date_heure_depart timestamp [not null]
  date_heure_arrivee timestamp [not null]
  status_id int [not null]
  retard_minutes int
  motif_annulation text
  created_at timestamp
  updated_at timestamp
}

Table prix_vol {
  id int [pk, increment]
  vol_opere_id int [not null]
  classe_siege_id int [not null]
  prix_base decimal [not null]
  created_at timestamp
  updated_at timestamp

  Indexes {
    (vol_opere_id, classe_siege_id) [unique]
  }
}

Table siege_vol {
  id int [pk, increment]
  vol_opere_id int [not null]
  siege_id int [not null]
  statut varchar
  created_at timestamp
  updated_at timestamp

  Indexes {
    (vol_opere_id, siege_id) [unique]
  }
}

Table vol_opere_equipage {
  id int [pk, increment]
  vol_opere_id int [not null]
  equipage_id int [not null]
  created_at timestamp

  Indexes {
    (vol_opere_id, equipage_id) [unique]
  }
}

Table client {
  id int [pk, increment]
  nom varchar [not null]
  prenom varchar [not null]
  email varchar [unique, not null]
  telephone varchar
  created_at timestamp
  updated_at timestamp
}

Table reservation {
  id int [pk, increment]
  client_id int [not null]
  vol_opere_id int [not null]
  date_reservation timestamp
  statut statut_reservation_enum
  created_at timestamp
  updated_at timestamp
}

Table billet {
  id int [pk, increment]
  reservation_id int [not null]
  siege_vol_id int [not null]
  prix decimal [not null]
  statut statut_billet_enum
  created_at timestamp
  updated_at timestamp
}

Table methode_paiement {
  id int [pk, increment]
  libelle varchar [unique, not null]
  description text
  created_at timestamp
  updated_at timestamp
}

Table paiement {
  id int [pk, increment]
  reservation_id int [not null]
  montant decimal [not null]
  date_paiement timestamp
  statut statut_paiement_enum
  created_at timestamp
  updated_at timestamp
}

Table paiement_methode {
  id int [pk, increment]
  paiement_id int [not null]
  methode_paiement_id int [not null]
  montant decimal [not null]
  created_at timestamp

  Indexes {
    (paiement_id, methode_paiement_id) [unique]
  }
}

Table maintenance_avion {
  id int [pk, increment]
  avion_id int [not null]
  date_debut timestamp [not null]
  date_fin timestamp
  description text
  created_at timestamp
}

Ref: avion.model_avion_id > model_avion.id
Ref: avion.etat_avion_id > etat_avion.id
Ref: siege.classe_siege_id > classe_siege.id
Ref: siege.avion_id > avion.id
Ref: equipage.role_id > role_equipage.id
Ref: ligne_vol.aeroport_depart_id > aeroport.id
Ref: ligne_vol.aeroport_arrivee_id > aeroport.id
Ref: vol_opere.ligne_vol_id > ligne_vol.id
Ref: vol_opere.avion_id > avion.id
Ref: vol_opere.status_id > status_vol.id
Ref: prix_vol.vol_opere_id > vol_opere.id
Ref: prix_vol.classe_siege_id > classe_siege.id
Ref: siege_vol.vol_opere_id > vol_opere.id
Ref: siege_vol.siege_id > siege.id
Ref: vol_opere_equipage.vol_opere_id > vol_opere.id
Ref: vol_opere_equipage.equipage_id > equipage.id
Ref: reservation.client_id > client.id
Ref: reservation.vol_opere_id > vol_opere.id
Ref: billet.reservation_id > reservation.id
Ref: billet.siege_vol_id > siege_vol.id
Ref: paiement.reservation_id > reservation.id
Ref: paiement_methode.paiement_id > paiement.id
Ref: paiement_methode.methode_paiement_id > methode_paiement.id
Ref: maintenance_avion.avion_id > avion.id
